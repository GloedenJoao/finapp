{% extends "base.html" %}
{% block content %}
<div class="container py-4">

  <div class="d-flex align-items-center justify-content-between mb-3">
    <h1 class="m-0">Saldos do dia (Hoje + Fechos mensais)</h1>
  </div>

  <div class="card shadow-sm border-0">
    <div class="card-body">
      {% if summary_rows and summary_rows|length > 0 %}
        <div class="table-responsive">
          <table class="table align-middle">
            <thead class="table-light">
              <tr>
                <th style="width: 28%">Data</th>
                <th style="width: 24%">Entrada</th>
                <th style="width: 24%">Saída</th>
                <th>Saldo</th>
              </tr>
            </thead>
            <tbody>
              {# já vem ordenado desc do backend, mas garantimos aqui também #}
              {% for row in summary_rows|sort(attribute='date', reverse=True) %}
                <tr>
                  <td>{{ row.date }}</td>
                  <td class="fw-semibold text-success">R$ {{ "%.2f"|format(row.in_amount) }}</td>
                  <td class="fw-semibold text-danger">R$ {{ "%.2f"|format(row.out_amount) }}</td>
                  <td class="fw-semibold {% if row.net >= 0 %}text-success{% else %}text-danger{% endif %}">
                    R$ {{ "%.2f"|format(row.net) }}
                  </td>
                </tr>
              {% endfor %}
            </tbody>
          </table>
        </div>
      {% else %}
        <p class="text-muted mb-0">Nenhum saldo encontrado.</p>
      {% endif %}
    </div>
  </div>

</div>
{% endblock %}
