{% extends "base.html" %}
{% block content %}
<div class="container py-4">

  <div class="d-flex align-items-center justify-content-between mb-3">
    <h1 class="m-0">Resumo do mês — {{ month }}</h1>
  </div>

  <!-- Cards: Totais do mês -->
  <div class="row g-3 mb-4">
    <div class="col-12 col-md-4">
      <div class="card shadow-sm border-0">
        <div class="card-body">
          <div class="text-muted small mb-1">Entradas</div>
          <div class="fs-4 fw-semibold">R$ {{ "%.2f"|format(totals.in or 0) }}</div>
        </div>
      </div>
    </div>
    <div class="col-12 col-md-4">
      <div class="card shadow-sm border-0">
        <div class="card-body">
          <div class="text-muted small mb-1">Saídas</div>
          <div class="fs-4 fw-semibold">R$ {{ "%.2f"|format(totals.out or 0) }}</div>
        </div>
      </div>
    </div>
    <div class="col-12 col-md-4">
      <div class="card shadow-sm border-0">
        <div class="card-body">
          <div class="text-muted small mb-1">Líquido</div>
          <div class="fs-4 fw-semibold {% if (totals.net or 0) >= 0 %}text-success{% else %}text-danger{% endif %}">
            R$ {{ "%.2f"|format(totals.net or 0) }}
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Tabela: por grupo no mês -->
  <div class="card shadow-sm border-0 mb-4">
    <div class="card-body">
      <h5 class="card-title mb-3">Por grupo (mês atual)</h5>
      {% if groups and groups|length > 0 %}
      <div class="table-responsive">
        <table class="table align-middle">
          <thead>
            <tr>
              <th>Grupo</th>
              <th style="width: 20%">Entradas</th>
              <th style="width: 20%">Saídas</th>
              <th style="width: 20%">Líquido</th>
            </tr>
          </thead>
          <tbody>
            {% for g in groups %}
            <tr>
              <td class="fw-medium">{{ g.name }}</td>
              <td>R$ {{ "%.2f"|format(g.in or 0) }}</td>
              <td>R$ {{ "%.2f"|format(g.out or 0) }}</td>
              <td class="{% if (g.net or 0) >= 0 %}text-success{% else %}text-danger{% endif %}">
                R$ {{ "%.2f"|format(g.net or 0) }}
              </td>
            </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
      {% else %}
        <p class="text-muted mb-0">Sem movimentos no mês.</p>
      {% endif %}
    </div>
  </div>

  <!-- (Opcional) Série diária filtrável você já tinha: mantenha se quiser abaixo -->

</div>
{% endblock %}
